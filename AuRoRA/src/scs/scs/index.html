<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
</head>
<body style="background: #111; color: #0f0; font-family: monospace; padding: 20px;">
    <h1>AMAZING GRACE: CNS INPUT</h1>
    <div id="status" style="color: red;">DISCONNECTED</div>
    <input type="text" id="userInput" placeholder="Talk to Grace..." style="width: 80%; padding: 10px;">
    <button onclick="sendSignal()">SEND</button>
    <div id="response" style="margin-top: 20px; white-space: pre-wrap;"></div>

    <script>
        const ros = new ROSLIB.Ros({ url: 'ws://localhost:9090' });
        ros.on('connection', () => document.getElementById('status').innerText = 'CNS LINK ACTIVE');
        
        const cnsTopic = new ROSLIB.Topic({
            ros: ros, name: '/cns/neural_input', messageType: 'std_msgs/String'
        });

        const gceResponseTopic = new ROSLIB.Topic({
            ros: ros, name: '/gce/response', messageType: 'std_msgs/String'
        });

        gceResponseTopic.subscribe((msg) => {
            document.getElementById('response').innerText += "\nGRACE: " + msg.data;
        });

        function sendSignal() {
            const val = document.getElementById('userInput').value;
            cnsTopic.publish(new ROSLIB.Message({ data: val }));
            document.getElementById('response').innerText += "\nYOU: " + val;
            document.getElementById('userInput').value = '';
        }
    </script>
</body>
</html>